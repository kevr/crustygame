expr TILEMAP_BMASK  0xFF000000
expr TILEMAP_BSHIFT 24
expr TILEMAP_GMASK  0x00FF0000
expr TILEMAP_GSHIFT 16
expr TILEMAP_RMASK  0x0000FF00
expr TILEMAP_RSHIFT 8
expr TILEMAP_AMASK  0x000000FF
expr TILEMAP_ASHIFT 0

macro TILEMAP_COLOR NAME CR CG CB CA
    expr C_NAME "(CR << TILEMAP_RSHIFT) | \
                 (CG << TILEMAP_GSHIFT) | \
                 (CB << TILEMAP_BSHIFT) | \
                 (CA << TILEMAP_ASHIFT)"
endmacro TILEMAP_COLOR

expr TILEMAP_HFLIP_MASK  0x01
expr TILEMAP_VFLIP_MASK  0x02
expr TILEMAP_BFLIP_MASK  0x03
expr TILEMAP_ROTATE_MASK 0x0C
expr TILEMAP_ROTATE_NONE 0x00
expr TILEMAP_ROTATE_90   0x04
expr TILEMAP_ROTATE_180  0x08
expr TILEMAP_ROTATE_270  0x0C

expr GFX_ADD_TILESET_SIZE        5
expr GFX_ADD_TILESET_GFXWIDTH    0
expr GFX_ADD_TILESET_GFXHEIGHT   1
expr GFX_ADD_TILESET_PITCH       2
expr GFX_ADD_TILESET_TILEWIDTH   3
expr GFX_ADD_TILESET_TILEHEIGHT  4

proc GFX_ADD_TILESET DATA GWIDTH GHEIGHT PTCH TWIDTH THEIGHT OUTID
    local STORAGE ints GFX_ADD_TILESET_SIZE

    move gfx_set_buffer DATA
    move STORAGE:GFX_ADD_TILESET_GFXWIDTH GWIDTH
    move STORAGE:GFX_ADD_TILESET_GFXHEIGHT GHEIGHT
    move STORAGE:GFX_ADD_TILESET_PITCH PTCH
    move STORAGE:GFX_ADD_TILESET_TILEWIDTH TWIDTH
    move STORAGE:GFX_ADD_TILESET_TILEHEIGHT THEIGHT
    move gfx_add_tileset STORAGE
    move OUTID gfx_get_return
ret

expr GFX_ADD_TILEMAP_SIZE   2
expr GFX_ADD_TILEMAP_WIDTH  0
expr GFX_ADD_TILEMAP_HEIGHT 1

proc GFX_ADD_TILEMAP TSWIDTH TSHEIGHT OUTID
    local STORAGE ints GFX_ADD_TILEMAP_SIZE

    move STORAGE:GFX_ADD_TILEMAP_WIDTH TSWIDTH
    move STORAGE:GFX_ADD_TILEMAP_HEIGHT TSHEIGHT
    move gfx_add_tilemap STORAGE
    move OUTID gfx_get_return
ret

proc GFX_SET_TILEMAP_TILESET TILEMAPID TILESETID
    move gfx_set_tilemap_tileset:TILEMAPID TILESETID
ret

expr GFX_SET_TILEMAP_MAP_SIZE   5
expr GFX_SET_TILEMAP_MAP_X      0
expr GFX_SET_TILEMAP_MAP_Y      1
expr GFX_SET_TILEMAP_MAP_PITCH  2
expr GFX_SET_TILEMAP_MAP_WIDTH  3
expr GFX_SET_TILEMAP_MAP_HEIGHT 4

proc GFX_SET_TILEMAP_MAP TILEMAPID DATA DESTX DESTY SRCPITCH MAPWIDTH MAPHEIGHT
    local STORAGE ints GFX_SET_TILEMAP_MAP_SIZE

    move gfx_set_buffer DATA
    move STORAGE:GFX_SET_TILEMAP_MAP_X DESTX
    move STORAGE:GFX_SET_TILEMAP_MAP_Y DESTY
    move STORAGE:GFX_SET_TILEMAP_MAP_PITCH SRCPITCH
    move STORAGE:GFX_SET_TILEMAP_MAP_WIDTH MAPWIDTH
    move STORAGE:GFX_SET_TILEMAP_MAP_HEIGHT MAPHEIGHT
    move gfx_set_tilemap_map:TILEMAPID STORAGE
ret

expr GFX_SET_TILEMAP_ATTRS_SIZE   5
expr GFX_SET_TILEMAP_ATTRS_X      0
expr GFX_SET_TILEMAP_ATTRS_Y      1
expr GFX_SET_TILEMAP_ATTRS_PITCH  2
expr GFX_SET_TILEMAP_ATTRS_WIDTH  3
expr GFX_SET_TILEMAP_ATTRS_HEIGHT 4

proc GFX_SET_TILEMAP_ATTRS TILEMAPID DATA DESTX DESTY SRCPITCH MAPWIDTH MAPHEIGHT
    local STORAGE ints GFX_SET_TILEMAP_ATTRS_SIZE

    move gfx_set_buffer DATA
    move STORAGE:GFX_SET_TILEMAP_ATTRS_X DESTX
    move STORAGE:GFX_SET_TILEMAP_ATTRS_Y DESTY
    move STORAGE:GFX_SET_TILEMAP_ATTRS_PITCH SRCPITCH
    move STORAGE:GFX_SET_TILEMAP_ATTRS_WIDTH MAPWIDTH
    move STORAGE:GFX_SET_TILEMAP_ATTRS_HEIGHT MAPHEIGHT
    move gfx_set_tilemap_attrs:TILEMAPID STORAGE
ret

expr GFX_UPDATE_TILEMAP_SIZE   4
expr GFX_UPDATE_TILEMAP_XPOS   0
expr GFX_UPDATE_TILEMAP_YPOS   1
expr GFX_UPDATE_TILEMAP_WIDTH  2
expr GFX_UPDATE_TILEMAP_HEIGHT 3

proc GFX_UPDATE_TILEMAP TILEMAPID STARTX STARTY ENDWIDTH ENDHEIGHT
    local STORAGE ints GFX_UPDATE_TILEMAP_SIZE

    move STORAGE:GFX_UPDATE_TILEMAP_XPOS STARTX
    move STORAGE:GFX_UPDATE_TILEMAP_YPOS STARTY
    move STORAGE:GFX_UPDATE_TILEMAP_WIDTH ENDWIDTH
    move STORAGE:GFX_UPDATE_TILEMAP_HEIGHT ENDHEIGHT
    move gfx_update_tilemap:TILEMAPID STORAGE
ret

proc GFX_ADD_LAYER TILEMAPID OUTID
    move gfx_add_layer TILEMAPID
    move OUTID gfx_get_return
ret

expr CRUSTYGAME_KEYDOWN              1
expr CRUSTYGAME_KEYUP                2
expr CRUSTYGAME_MOUSEMOTION          3
expr CRUSTYGAME_MOUSEBUTTONDOWN      4
expr CRUSTYGAME_MOUSEBUTTONUP        5
expr CRUSTYGAME_MOUSEWHEEL           6
expr CRUSTYGAME_JOYAXISMOTION        7
expr CRUSTYGAME_JOYBALLMOTION        8
expr CRUSTYGAME_JOYHATMOTION         9
expr CRUSTYGAME_JOYBUTTONDOWN        10
expr CRUSTYGAME_JOYBUTTONUP          11
expr CRUSTYGAME_CONTROLLERAXISMOTION 12
expr CRUSTYGAME_CONTROLLERBUTTONDOWN 13
expr CRUSTYGAME_CONTROLLERBUTTONUP   14

